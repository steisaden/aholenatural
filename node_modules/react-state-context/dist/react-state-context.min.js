!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t.createStateContext=e(t.React)}(this,function(t){"use strict";var e="default"in t?t.default:t,n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t,e){return t(e={exports:{}},e.exports),e.exports}function i(t){return function(){return t}}var u=function(){};u.thatReturns=i,u.thatReturnsFalse=i(!1),u.thatReturnsTrue=i(!0),u.thatReturnsNull=i(null),u.thatReturnsThis=function(){return this},u.thatReturnsArgument=function(t){return t};var a=u;var c=function(t,e,n,r,o,i,u,a){if(!t){var c;if(void 0===e)c=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,r,o,i,u,a],s=0;(c=Error(e.replace(/%s/g,function(){return f[s++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},f=a,s=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;10>n;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}();var d="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",y=o(function(t){t.exports=function(){function t(t,e,n,r,o,i){i!==d&&c(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=a,n.PropTypes=n,n}()}),h="__global_unique_id__",v=function(){return n[h]=(n[h]||0)+1},b=o(function(t,n){n.__esModule=!0;i(e);var r=i(y),o=i(v);i(f);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=1073741823;n.default=function(t,n){var i,f,p="__create-react-context-"+(0,o.default)()+"__",l=function(t){function e(){var n,r,o,i;u(this,e);for(var c=arguments.length,f=Array(c),s=0;c>s;s++)f[s]=arguments[s];return n=r=a(this,t.call.apply(t,[this].concat(f))),r.emitter=(o=r.props.value,i=[],{on:function(t){i.push(t)},off:function(t){i=i.filter(function(e){return e!==t})},get:function(){return o},set:function(t,e){o=t,i.forEach(function(t){return t(o,e)})}}),a(r,n)}return c(e,t),e.prototype.getChildContext=function(){var t;return(t={})[p]=this.emitter,t},e.prototype.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var e=this.props.value,r=t.value,o=void 0;((i=e)===(u=r)?0!==i||1/i==1/u:i!=i&&u!=u)?o=0:(o="function"==typeof n?n(e,r):s,0!=(o|=0)&&this.emitter.set(t.value,o))}var i,u},e.prototype.render=function(){return this.props.children},e}(e.Component);l.childContextTypes=((i={})[p]=r.default.object.isRequired,i);var d=function(e){function n(){var t,r;u(this,n);for(var o=arguments.length,i=Array(o),c=0;o>c;c++)i[c]=arguments[c];return t=r=a(this,e.call.apply(e,[this].concat(i))),r.state={value:r.getValue()},r.onUpdate=function(t,e){0!=((0|r.observedBits)&e)&&r.setState({value:r.getValue()})},a(r,t)}return c(n,e),n.prototype.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?s:e},n.prototype.componentDidMount=function(){this.context[p]&&this.context[p].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?s:t},n.prototype.componentWillUnmount=function(){this.context[p]&&this.context[p].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[p]?this.context[p].get():t},n.prototype.render=function(){return(Array.isArray(t=this.props.children)?t[0]:t)(this.state.value);var t},n}(e.Component);return d.contextTypes=((f={})[p]=r.default.object,f),{Provider:l,Consumer:d}},t.exports=n.default});r(b);var m=r(o(function(t,n){n.__esModule=!0;var r=i(e),o=i(b);function i(t){return t&&t.__esModule?t:{default:t}}n.default=r.default.createContext||o.default,t.exports=n.default}));var O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},g=function(){function t(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),j=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},x=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};function P(t){return!(t&&"object"!==(void 0===t?"undefined":O(t))||Array.isArray(t))}return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1],o=m(),i=void 0;return P(r)&&(i=r),{Provider:function(r){function u(){for(var t,e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];_(this,u);var a=x(this,(t=u.__proto__||Object.getPrototypeOf(u)).call.apply(t,[this].concat(r)));a.onAction=function(t){var e=void 0===t?"undefined":O(t);if("undefined"!==e)if("function"===e)t(a.setStateWrapper);else{if(!P(t))return;a.setState(function(e){return a.getUpdatedState(e,t)})}},a.getUpdatedState=function(t,e){if(P(e)){var n=null===e?null:Object.assign({},t.state,e);if(!function(t,e){if(t===e)return!0;if(null===t||null===e)return t===e;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in e)if(t[n]!==e[n])return!1;return!0}(t.state,n))return{state:n}}},a.setStateWrapper=function(t){a.setState(function(e){var n="function"==typeof t?t(e.state):t;return a.getUpdatedState(e,n)})};var c={},f=function(t){var e=n[t];return"function"!=typeof e?"continue":"state"===t?"continue":void(c[t]=function(){return a.onAction(e.apply(void 0,arguments))})};for(var s in n)f(s);return a.state=j({state:i},c),a}return w(u,t.Component),g(u,[{key:"render",value:function(){return e.createElement(o.Provider,{value:this.state,children:this.props.children})}}]),u}(),Consumer:o.Consumer}}});
